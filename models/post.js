var mongoose     = require('mongoose');
var Schema       = mongoose.Schema;

var PostSchema   = new Schema({
    provider: String,
    id: String,//A unique identifier for the user, as generated by the service provider.
    data: String
});

var Post = mongoose.model('post', PostSchema);

module.exports = {
    findPostsUniversal : function(params, callback) {
        console.log("trying to find posts: " + JSON.stringify(params));
        var res = post.find(params, function(err, x){
            console.log("posts: " + JSON.stringify(x));
            callback(err, x);
        });
    },
    addNewPost: function (item, callback){
        console.log("adding new post item: " + JSON.stringify(item));
        var x = new Post();
        for (var key in item) {
            x[key] = item[key];}
        x.save(function (err) {
            if (err)
                console.log('error saving post');
            console.log("post saved: " + JSON.stringify(x));
            callback(err, x);
        });
    }
}

